var sub_regexes={tag:"([a-zA-Z][a-zA-Z0-9]{0,10}|\\*)",attribute:"[.a-zA-Z_:][-\\w:.]*(\\(\\))?)",value:"\\s*[\\w/:][-/\\w\\s,:;.]*"},validation_re="(?P<node>(^id\\([\"\\']?(?P<idvalue>%(value)s)[\"\\']?\\)|(?P<nav>//?(?:following-sibling::)?)(?P<tag>%(tag)s)(\\[((?P<matched>(?P<mattr>@?%(attribute)s=[\"\\'](?P<mvalue>%(value)s))[\"\\']|(?P<contained>contains\\((?P<cattr>@?%(attribute)s,\\s*[\"\\'](?P<cvalue>%(value)s)[\"\\']\\)))\\])?(\\[\\s*(?P<nth>\\d|last\\(\\s*\\))\\s*\\])?))";for(var prop in sub_regexes)validation_re=validation_re.replace(new RegExp("%\\("+prop+"\\)s","gi"),sub_regexes[prop]);function XPathException(t){this.message=t,this.name="[XPathException]"}function cssify(t){var e,a,n,s,i,r,l,o,c,u="",p=[],d=0,v=0;if(void 0===(t=t.replace(/contains\s*\(\s*concat\(["']\s+["']\s*,\s*@class\s*,\s*["']\s+["']\)\s*,\s*["']\s+([a-zA-Z0-9-_]+)\s+["']\)/gi,'@class="$1"'))||""===t.replace(/[\s-_=]/g,"")||t.length!==t.replace(/[-_\w:.]+\(\)\s*=|=\s*[-_\w:.]+\(\)|\sor\s|\sand\s|\[(?:[^\/\]]+[\/\[]\/?.+)+\]|starts-with\(|\[.*last\(\)\s*[-\+<>=].+\]|number\(\)|not\(|count\(|text\(|first\(|normalize-space|[^\/]following-sibling|concat\(|descendant::|parent::|self::|child::|/gi,"").length)throw new XPathException("Invalid or unsupported XPath: "+t);for(var h=t.split("|");h[d];){for(e=new RegExp(validation_re,"gi"),c=[];o=e.exec(h[d]);){if(!o&&0===v)throw new XPathException("Invalid or unsupported XPath: "+t);if(a={node:o[5],idvalue:o[12]||o[3],nav:o[4],tag:o[5],matched:o[7],mattr:o[10]||o[14],mvalue:o[12]||o[16],contained:o[13],cattr:o[14],cvalue:o[16],nth:o[18]},s=0!=v&&a.nav?~a.nav.indexOf("following-sibling::")?" + ":"//"==a.nav?" ":" > ":"",i="*"===a.tag?"":a.tag||"",a.contained){if(0!==a.cattr.indexOf("@"))throw new XPathException("Invalid or unsupported XPath attribute: "+a.cattr);r="["+a.cattr.replace(/^@/,"")+"*="+a.cvalue+"]"}else if(a.matched)switch(a.mattr){case"@id":r="#"+a.mvalue.replace(/^\s+|\s+$/,"").replace(/\s/g,"#");break;case"@class":r="."+a.mvalue.replace(/^\s+|\s+$/,"").replace(/\s/g,".");break;case"text()":case".":throw new XPathException("Invalid or unsupported XPath attribute: "+a.mattr);default:if(0!==a.mattr.indexOf("@"))throw new XPathException("Invalid or unsupported XPath attribute: "+a.mattr);-1!==a.mvalue.indexOf(" ")&&(a.mvalue='"'+a.mvalue.replace(/^\s+|\s+$/,"")+'"'),r="["+a.mattr.replace("@","")+"="+a.mvalue+"]"}else r=a.idvalue?"#"+a.idvalue.replace(/\s/,"#"):"";if(a.nth)if(-1===a.nth.indexOf("last")){if(isNaN(parseInt(a.nth,10)))throw new XPathException("Invalid or unsupported XPath attribute: "+a.nth);l=1!==parseInt(a.nth,10)?":nth-of-type("+a.nth+")":":first-of-type"}else l=":last-of-type";else l="";u=s+i+r+l,c.push(u),v++}if(""===(n=c.join("")))throw new XPathException("Invalid or unsupported XPath: "+a.node);p.push(n),d++}return document.getElementById("resultCss").value=p.join(", ")}validation_re=validation_re.replace(/\?P<node>|\?P<idvalue>|\?P<nav>|\?P<tag>|\?P<matched>|\?P<mattr>|\?P<mvalue>|\?P<contained>|\?P<cattr>|\?P<cvalue>|\?P<nth>/gi,"");